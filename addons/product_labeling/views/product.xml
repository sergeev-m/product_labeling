<?xml version="1.0" encoding="utf-8" ?>

<odoo>
  <data>
    <record id="product_act_form_view" model="ir.ui.view">
                <field name="name">product.act.form</field>
                <field name="model">product.act</field>
                <field name="arch" type="xml">
                <form>

                <header>
                    <div class="o_form_buttons">
                        <button
                                name="carry_out_an_act"
                                type="object"
                                string="Провести акт"
                                class="oe_highlight"
                                invisible="is_carried_out"
                        />
                    </div>
                    <div class="o_form_label">
                        <span>Акт изменения свойств товаров #</span>
                        <field name="name"/>
                    </div>
                </header>

                <sheet>
                    <group>
                        <field name="current_date" class="oe_inline"/>
                        <field name="product_id"
                               invisible="status != 'Покупка'"
                               required="status == 'Покупка'"
                        />
                        <field name="marked_product_ids"
                               invisible="status == 'Покупка'"
                               required="status != 'Покупка'"
                        />
                        <field name="warehouse_from_id"
                               invisible="status == 'Покупка'"
                               required="status != 'Покупка'"
                        />
                        <field name="warehouse_to_id"/>
                        <field name="status_id"/>
                        <field name="amount"/>

                        <field name="status" invisible="1"/>
                        <field name="is_carried_out" invisible="1"/>
                    </group>

                            <field name="expenses_ids">
                                <tree>
<!--                                    <field name="marked_product_id"/>-->
                                    <field name="expenses_id"/>
                                    <field name="currency_id"/>
                                    <field name="value"/>
                                </tree>

                                <form>
                                    <group>
                                       <group>
                                           <field name="expenses_id"/>
                                       </group>
                                       <group>
                                           <field name="currency_id"/>
                                           <field name="value"/>
                                       </group>
                                   </group>
                                </form>
                            </field>
                </sheet>
            </form>
        </field>
    </record>


    <record id="product_act_tree_view" model="ir.ui.view">
        <field name="name">product.act.tree</field>
        <field name="model">product.act</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" string="Номер Акта"/>
<!--                <field name="product_id"/>-->
<!--                <field name="marked_product_id"/>-->
                <field name="warehouse_from_id"/>
                <field name="warehouse_to_id"/>
                <field name="status_id"/>
                <field name="amount"/>
                <field name="is_carried_out"/>
            </tree>
        </field>
    </record>

    <record id="action_product_act" model="ir.actions.act_window">
        <field name="name">Akt</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">product.act</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="product_act_tree_view"/>
    </record>



    <record id="action_product_create" model="ir.actions.act_window">
        <field name="name">product</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">product.product</field>
        <field name="view_mode">tree,form</field>
    </record>





      <record id="product_product_tree_view" model="ir.ui.view">
        <field name="name">product.marked_product.tree</field>
        <field name="model">product.marked_product</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name"/>
                <field name="warehouse_id"/>
                <field name="status_id"/>
            </tree>
        </field>
    </record>


    <record id="view_marked_product_form" model="ir.ui.view">
        <field name="name">product.marked_product.form</field>
        <field name="model">product.marked_product</field>
        <field name="arch" type="xml">

            <form>
                <header>
                    <div>
                        <field name="name"/>
                    </div>
                </header>

            <group>
                <field name="product_id"/>
                <field name="warehouse_id"/>
                <field name="status_id"/>

                    <field name="expenses_receipts_ids" widget="one2many_list">
                        <tree>
                            <field name="create_date"/>
                            <field name="expenses_id"/>
                            <field name="currency_id"/>
                            <field name="value"/>
                        </tree>
                    </field>

            </group>
            <group>
                <field name="total_amount" string="Прибыль" widget="monetary" options="{'currency_field': 'currency_id'}"/>
            </group>
            </form>
        </field>
    </record>



      <record id="action_product_marked_product" model="ir.actions.act_window">
        <field name="name">Product</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">product.marked_product</field>
        <field name="view_mode">tree,form</field>
        <field name="view_id" ref="product_product_tree_view"/>
    </record>


  </data>
</odoo>
